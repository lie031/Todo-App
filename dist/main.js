(()=>{"use strict";class t{project=null;constructor(t,e,s,c){this.title=t,this.description=e,this.date=s,this.priority=c}setProject(t){this.project=t}}class e{constructor(t){this.name=t,this.taskList=[]}addTask(t){this.taskList.push(t)}}class s{static projects=[];static tasks=[];static saveProjects(){localStorage.setItem("projects",JSON.stringify(s.projects))}static saveTask(){localStorage.setItem("tasks",JSON.stringify(s.tasks))}static loadProjects(){const t=localStorage.getItem("projects");if(t){const c=JSON.parse(t);s.projects=c.map((t=>{const s=new e(t.name);return s.taskList=t.taskList,s}))}else s.createDefaultProject()}static loadTasks(){const t=localStorage.getItem("tasks");t&&(s.tasks=JSON.parse(t))}static createDefaultProject(){const t=new e("Default Project");s.projects.push(t),s.saveProjects()}}function c(t){const e=document.querySelector(".projects"),s=document.createElement("div");s.classList.add("project"),s.innerHTML=`\n        <span class="project-name">${t}</span>\n        <button class="delete-project deleteBtn"><i class="fas fa-trash-alt"></i></button>\n    `,e.appendChild(s)}function o(t,e){const s=document.querySelector(".tasks"),c=document.createElement("div");c.classList.add("task"),c.innerHTML=`\n        <div class="task-info">\n            <span class="task-title">${t}</span>\n            <span class="task-date">${e}</span>\n        </div>\n        <button class="delete-task deleteBtn"><i class="fas fa-trash-alt"></i></button>\n    `,s.appendChild(c)}s.loadProjects(),document.addEventListener("DOMContentLoaded",(()=>{const a=document.querySelector(".createProjectBtn"),n=document.querySelector(".projectName"),r=document.getElementById("taskModal"),l=document.querySelector(".createTaskBtn"),i=document.querySelector(".taskTitle"),d=document.querySelector(".taskDescription"),u=document.querySelector(".taskDate"),p=document.querySelector(".taskPriority"),m=document.querySelector(".projects"),j=document.querySelector(".tasks"),k=document.querySelector(".openModalBtn"),v=document.querySelector(".modal .close");a.addEventListener("click",(()=>{const t=n.value.trim();t&&(function(t){const c=new e(t);s.projects.push(c),s.saveProjects()}(t),c(t),n.value="",console.log("Project created"))})),k.addEventListener("click",(()=>{r.style.display="block"})),v.addEventListener("click",(()=>{r.style.display="none"})),window.addEventListener("click",(t=>{t.target===r&&(r.style.display="none")})),l.addEventListener("click",(()=>{const e=document.querySelector(".project.active");if(e){const c=e.querySelector(".project-name").textContent.trim(),a=i.value.trim(),n=d.value.trim(),l=u.value,m=p.value;a&&n&&l&&m&&(function(e,c,o,a,n){const r=new t(c,o,a,n),l=s.projects.find((t=>t.name===e));l&&(l.addTask(r),s.saveProjects())}(c,a,n,l,m),o(a,l),i.value="",d.value="",u.value="",p.value="",r.style.display="none",console.log("Task created"))}})),m.addEventListener("click",(t=>{const e=t.target.closest(".project");e&&(t.target.classList.contains("delete-project")||t.target.closest(".delete-project")?(function(t){const e=s.projects.findIndex((e=>e.name===t));e>-1&&(s.projects.splice(e,1),s.saveProjects())}(e.querySelector(".project-name").textContent.trim()),e.remove(),j.innerHTML=""):(document.querySelectorAll(".project").forEach((t=>t.classList.remove("active"))),e.classList.add("active"),function(t){document.querySelector(".tasks").innerHTML="";const e=s.projects.find((e=>e.name===t));e&&e.taskList.forEach((t=>{o(t.title,t.date)}))}(e.querySelector(".project-name").textContent.trim())))})),j.addEventListener("click",(t=>{const e=t.target.closest(".task");if(e&&(t.target.classList.contains("delete-task")||t.target.closest(".delete-task"))){const t=e.querySelector(".task-title").textContent.trim(),c=document.querySelector(".project.active");c&&(function(t,e){const c=s.projects.find((e=>e.name===t));if(c){const t=c.taskList.findIndex((t=>t.title===e));t>-1&&(c.taskList.splice(t,1),s.saveProjects())}}(c.querySelector(".project-name").textContent.trim(),t),e.remove())}})),s.loadProjects(),s.projects.forEach((t=>{c(t.name)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRQSxFQUFLVixRQUFVMEMsSUFDaEU2QyxHQUFhLElBQ2J6RixFQUFRVSxTQUFTd0UsT0FBT08sRUFBVyxHQUNuQzNFLEVBQVFFLGVBRWhCLENBQ0osQ0F2RXdCMEUsQ0FEb0JyQixFQUFjaEMsY0FBYyxpQkFBaUJpQyxZQUFZVixPQUNyRGhCLEdBQ3hCNEMsRUFBWUosU0FFcEIsQ0FDSixJQWlDUnRFLEVBQVFVLGVBQ1JWLEVBQVFPLFNBQVNpRSxTQUFRdEYsSUFDckJpQyxFQUFlakMsRUFBUVMsS0FBSyxHQWhDSixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvbW9kdWxlcy9UYXNrLmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL21vZHVsZXMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9tb2R1bGVzL1N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAvLi9zcmMvbW9kdWxlcy9Eb21TdHVmZi5qcyIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9tb2R1bGVzL0xvZ2ljLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza3tcblxuICAgIHByb2plY3QgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIH1cblxuICAgIHNldFByb2plY3QocHJvamVjdCl7XG4gICAgICAgIHRoaXMucHJvamVjdD1wcm9qZWN0O1xuICAgIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3R7XG5cbiAgICBjb25zdHJ1Y3RvcihuYW1lKXtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGFkZFRhc2sodGFzayl7XG4gICAgICAgIHRoaXMudGFza0xpc3QucHVzaCh0YXNrKVxuICAgIH1cblxufSIsImltcG9ydCBQcm9qZWN0IGZyb20gXCIuL1Byb2plY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZXtcblxuICAgIHN0YXRpYyBwcm9qZWN0cyA9IFtdO1xuICAgIHN0YXRpYyB0YXNrcyA9IFtdO1xuXG4gICAgc3RhdGljIHNhdmVQcm9qZWN0cygpe1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzXCIsSlNPTi5zdHJpbmdpZnkoU3RvcmFnZS5wcm9qZWN0cykpXG4gICAgfVxuXG4gICAgc3RhdGljIHNhdmVUYXNrKCl7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGFza3NcIiwgSlNPTi5zdHJpbmdpZnkoU3RvcmFnZS50YXNrcykpXG4gICAgfVxuXG4gICAgc3RhdGljIGxvYWRQcm9qZWN0cygpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzXCIpO1xuICAgICAgICBpZiAocHJvamVjdHMpIHtcblxuICAgICAgICAgICAgY29uc3QgcHJvamVjdE9iamVjdHMgPSBKU09OLnBhcnNlKHByb2plY3RzKTtcbiAgICAgICAgICAgIFN0b3JhZ2UucHJvamVjdHMgPSBwcm9qZWN0T2JqZWN0cy5tYXAocHJvamVjdERhdGEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3QgPSBuZXcgUHJvamVjdChwcm9qZWN0RGF0YS5uYW1lKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnRhc2tMaXN0ID0gcHJvamVjdERhdGEudGFza0xpc3Q7IC8vIEFzc3VtaW5nIHRhc2tzIGFyZSBzaW1wbGUgb2JqZWN0cyBoZXJlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2plY3Q7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIFN0b3JhZ2UuY3JlYXRlRGVmYXVsdFByb2plY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBsb2FkVGFza3MoKSB7XG4gICAgICAgIGNvbnN0IHRhc2tzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0YXNrc1wiKTtcbiAgICAgICAgaWYgKHRhc2tzKSB7XG4gICAgICAgICAgICBTdG9yYWdlLnRhc2tzID0gSlNPTi5wYXJzZSh0YXNrcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgY3JlYXRlRGVmYXVsdFByb2plY3QoKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gbmV3IFByb2plY3QoJ0RlZmF1bHQgUHJvamVjdCcpO1xuICAgICAgICBTdG9yYWdlLnByb2plY3RzLnB1c2goZGVmYXVsdFByb2plY3QpO1xuICAgICAgICBTdG9yYWdlLnNhdmVQcm9qZWN0cygpO1xuICAgIH1cblxuXG5cbn0iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBjcmVhdGVUYXNrIH0gZnJvbSAnLi9Mb2dpYyc7XG5pbXBvcnQgU3RvcmFnZSBmcm9tICcuL1N0b3JhZ2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEhhbmRsZXIoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jcmVhdGVQcm9qZWN0QnRuJyk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdE5hbWUnKTtcbiAgICAgICAgY29uc3QgdGFza01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2tNb2RhbCcpO1xuICAgICAgICBjb25zdCB0YXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNyZWF0ZVRhc2tCdG4nKTtcbiAgICAgICAgY29uc3QgdGFza1RpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza1RpdGxlJyk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tEZXNjcmlwdGlvbicpO1xuICAgICAgICBjb25zdCB0YXNrRGF0ZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tEYXRlJyk7XG4gICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tQcmlvcml0eScpO1xuICAgICAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpO1xuICAgICAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xuICAgICAgICBjb25zdCBvcGVuTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3Blbk1vZGFsQnRuJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwgLmNsb3NlJyk7XG5cbiAgICAgICAgcHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdE5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAocHJvamVjdE5hbWUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVQcm9qZWN0KHByb2plY3ROYW1lKTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5UHJvamVjdChwcm9qZWN0TmFtZSk7XG4gICAgICAgICAgICAgICAgcHJvamVjdE5hbWVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9qZWN0IGNyZWF0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgb3Blbk1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGFza01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9KTtcblxuICAgICAgICBjbG9zZU1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGFza01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGFza01vZGFsKSB7XG4gICAgICAgICAgICAgICAgdGFza01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QuYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlUHJvamVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gYWN0aXZlUHJvamVjdC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1uYW1lJykudGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tUaXRsZUlucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSB0YXNrRGVzY3JpcHRpb25JbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0RhdGUgPSB0YXNrRGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IHRhc2tQcmlvcml0eUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrVGl0bGUgJiYgdGFza0Rlc2NyaXB0aW9uICYmIHRhc2tEYXRlICYmIHRhc2tQcmlvcml0eSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYXNrKHByb2plY3ROYW1lLCB0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0RhdGUsIHRhc2tQcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUYXNrKHRhc2tUaXRsZSwgdGFza0RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrVGl0bGVJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0YXNrRGF0ZUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eUlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGFzayBjcmVhdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBwcm9qZWN0c0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0RWxlbWVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0Jyk7XG4gICAgICAgICAgICBpZiAocHJvamVjdEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUtcHJvamVjdCcpIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtcHJvamVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpLmZvckVhY2gocHJvaiA9PiBwcm9qLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRBbmREaXNwbGF5VGFza3MocHJvamVjdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50LnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0YXNrc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrJyk7XG4gICAgICAgICAgICBpZiAodGFza0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWxldGUtdGFzaycpIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtdGFzaycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLXRpdGxlJykudGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QuYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVQcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGFjdGl2ZVByb2plY3QucXVlcnlTZWxlY3RvcignLnByb2plY3QtbmFtZScpLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRhc2socHJvamVjdE5hbWUsIHRhc2tUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9hZEFuZERpc3BsYXlQcm9qZWN0cygpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJyk7XG4gICAgY29uc3QgcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHByb2plY3QuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuICAgIHByb2plY3QuaW5uZXJIVE1MID0gYFxuICAgICAgICA8c3BhbiBjbGFzcz1cInByb2plY3QtbmFtZVwiPiR7cHJvamVjdE5hbWV9PC9zcGFuPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGVsZXRlLXByb2plY3QgZGVsZXRlQnRuXCI+PGkgY2xhc3M9XCJmYXMgZmEtdHJhc2gtYWx0XCI+PC9pPjwvYnV0dG9uPlxuICAgIGA7XG4gICAgcHJvamVjdHNDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlUYXNrKHRhc2tUaXRsZSwgdGFza0RhdGUpIHtcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrLmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcbiAgICB0YXNrLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRhc2staW5mb1wiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YXNrLXRpdGxlXCI+JHt0YXNrVGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0YXNrLWRhdGVcIj4ke3Rhc2tEYXRlfTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJkZWxldGUtdGFzayBkZWxldGVCdG5cIj48aSBjbGFzcz1cImZhcyBmYS10cmFzaC1hbHRcIj48L2k+PC9idXR0b24+XG4gICAgYDtcbiAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrKTtcbn1cblxuZnVuY3Rpb24gbG9hZEFuZERpc3BsYXlQcm9qZWN0cygpIHtcbiAgICBTdG9yYWdlLmxvYWRQcm9qZWN0cygpO1xuICAgIFN0b3JhZ2UucHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgZGlzcGxheVByb2plY3QocHJvamVjdC5uYW1lKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZEFuZERpc3BsYXlUYXNrcyhwcm9qZWN0TmFtZSkge1xuICAgIGNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG4gICAgdGFza3NDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgY29uc3QgcHJvamVjdCA9IFN0b3JhZ2UucHJvamVjdHMuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgIHByb2plY3QudGFza0xpc3QuZm9yRWFjaCh0YXNrID0+IHtcbiAgICAgICAgICAgIGRpc3BsYXlUYXNrKHRhc2sudGl0bGUsIHRhc2suZGF0ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgIGNvbnN0IHByb2plY3RJbmRleCA9IFN0b3JhZ2UucHJvamVjdHMuZmluZEluZGV4KHByb2ogPT4gcHJvai5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgaWYgKHByb2plY3RJbmRleCA+IC0xKSB7XG4gICAgICAgIFN0b3JhZ2UucHJvamVjdHMuc3BsaWNlKHByb2plY3RJbmRleCwgMSk7XG4gICAgICAgIFN0b3JhZ2Uuc2F2ZVByb2plY3RzKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKHByb2plY3ROYW1lLCB0YXNrVGl0bGUpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gU3RvcmFnZS5wcm9qZWN0cy5maW5kKHByb2ogPT4gcHJvai5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgY29uc3QgdGFza0luZGV4ID0gcHJvamVjdC50YXNrTGlzdC5maW5kSW5kZXgodGFzayA9PiB0YXNrLnRpdGxlID09PSB0YXNrVGl0bGUpO1xuICAgICAgICBpZiAodGFza0luZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHByb2plY3QudGFza0xpc3Quc3BsaWNlKHRhc2tJbmRleCwgMSk7XG4gICAgICAgICAgICBTdG9yYWdlLnNhdmVQcm9qZWN0cygpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IHByb2plY3RIYW5kbGVyIH0gZnJvbSAnLi9tb2R1bGVzL0RvbVN0dWZmJztcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4vbW9kdWxlcy9TdG9yYWdlJztcblxuU3RvcmFnZS5sb2FkUHJvamVjdHMoKTtcbnByb2plY3RIYW5kbGVyKCk7XG5cblxuIiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4vVGFza1wiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vUHJvamVjdFwiO1xuaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4vU3RvcmFnZVwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0KG5hbWUpe1xuICAgIGNvbnN0IHByb2plY3QgPSBuZXcgUHJvamVjdChuYW1lKTtcbiAgICBTdG9yYWdlLnByb2plY3RzLnB1c2gocHJvamVjdCk7XG4gICAgU3RvcmFnZS5zYXZlUHJvamVjdHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2socHJvamVjdE5hbWUsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpIHtcbiAgICBjb25zdCB0YXNrID0gbmV3IFRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSk7XG4gICAgY29uc3QgcHJvamVjdCA9IFN0b3JhZ2UucHJvamVjdHMuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICAgIHByb2plY3QuYWRkVGFzayh0YXNrKTtcbiAgICAgICAgU3RvcmFnZS5zYXZlUHJvamVjdHMoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiVGFzayIsInByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJ0aGlzIiwic2V0UHJvamVjdCIsIlByb2plY3QiLCJuYW1lIiwidGFza0xpc3QiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJTdG9yYWdlIiwic3RhdGljIiwic2F2ZVByb2plY3RzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0cyIsInNhdmVUYXNrIiwidGFza3MiLCJsb2FkUHJvamVjdHMiLCJnZXRJdGVtIiwicHJvamVjdE9iamVjdHMiLCJwYXJzZSIsIm1hcCIsInByb2plY3REYXRhIiwiY3JlYXRlRGVmYXVsdFByb2plY3QiLCJsb2FkVGFza3MiLCJkZWZhdWx0UHJvamVjdCIsImRpc3BsYXlQcm9qZWN0IiwicHJvamVjdE5hbWUiLCJwcm9qZWN0c0NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImRpc3BsYXlUYXNrIiwidGFza1RpdGxlIiwidGFza0RhdGUiLCJ0YXNrc0NvbnRhaW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9qZWN0QnV0dG9uIiwicHJvamVjdE5hbWVJbnB1dCIsInRhc2tNb2RhbCIsImdldEVsZW1lbnRCeUlkIiwidGFza0J1dHRvbiIsInRhc2tUaXRsZUlucHV0IiwidGFza0Rlc2NyaXB0aW9uSW5wdXQiLCJ0YXNrRGF0ZUlucHV0IiwidGFza1ByaW9yaXR5SW5wdXQiLCJvcGVuTW9kYWxCdG4iLCJjbG9zZU1vZGFsQnRuIiwidmFsdWUiLCJ0cmltIiwiY3JlYXRlUHJvamVjdCIsImNvbnNvbGUiLCJsb2ciLCJzdHlsZSIsImRpc3BsYXkiLCJ3aW5kb3ciLCJldmVudCIsInRhcmdldCIsImFjdGl2ZVByb2plY3QiLCJ0ZXh0Q29udGVudCIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsImZpbmQiLCJwcm9qIiwiY3JlYXRlVGFzayIsImUiLCJwcm9qZWN0RWxlbWVudCIsImNsb3Nlc3QiLCJjb250YWlucyIsInByb2plY3RJbmRleCIsImZpbmRJbmRleCIsInNwbGljZSIsImRlbGV0ZVByb2plY3QiLCJyZW1vdmUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImxvYWRBbmREaXNwbGF5VGFza3MiLCJ0YXNrRWxlbWVudCIsInRhc2tJbmRleCIsImRlbGV0ZVRhc2siXSwic291cmNlUm9vdCI6IiJ9